<!DOCTYPE html><html lang="en"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description"><title>PHP | Js' Technical Blog</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/npm/normalize.css/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/npm/purecss/build/pure-min.min.css"><link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/npm/purecss/build/grids-responsive-min.css"><link rel="stylesheet" href="//cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.jsdelivr.net/npm/jquery/dist/jquery.min.js"></script><link rel="icon" mask="" sizes="any" href="/favicon.ico"><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><link rel="alternate" type="application/atom+xml" href="/atom.xml"><script type="text/javascript" src="//cdn.jsdelivr.net/npm/clipboard/dist/clipboard.min.js"></script><script type="text/javascript" src="//cdn.jsdelivr.net/gh/codeseven/toastr/build/toastr.min.js"></script><link rel="stylesheet" href="//cdn.jsdelivr.net/gh/codeseven/toastr/build/toastr.min.css"><meta name="generator" content="Hexo 5.0.2"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">PHP</h1><a id="logo" href="/.">Js' Technical Blog</a><p class="description">This is my technical blog about programming, server setup &amp; configuration, technical learning experience.</p></div><div id="nav-menu"><a href="/."><i class="fa fa-home"> Home</i></a><a href="/archives/"><i class="fa fa-archive"> Archive</i></a><a class="current" href="/short-notes/"><i class="fa fa-graduation-cap"> Short-Notes</i></a><a href="/about/"><i class="fa fa-user"> About</i></a><a href="/atom.xml"><i class="fa fa-rss"> RSS</i></a></div></div><div class="pure-g" id="layout"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">PHP</h1><div class="post-content"><p><a href="https://www.php.net/" target="_blank" rel="noopener">https://www.php.net/</a></p>
<h4 id="Assign-range-of-number-to-array"><a href="#Assign-range-of-number-to-array" class="headerlink" title="Assign range of number to array"></a>Assign range of number to array</h4><p>Easier way:</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$foo = range(<span class="number">1</span>, <span class="number">5</span>);</span><br><span class="line">print_r($foo);</span><br></pre></td></tr></table></figure>
<p>Harder way:</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$foo = <span class="keyword">array</span>();</span><br><span class="line"><span class="keyword">for</span>($i = <span class="number">1</span>; $i &lt;= <span class="number">5</span>; $i++) $foo[] = $i;</span><br></pre></td></tr></table></figure>
<p>both will output:</p>
<figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Array</span><br><span class="line">(</span><br><span class="line">[<span class="number">0</span>] =&gt; <span class="number">1</span></span><br><span class="line">[<span class="number">1</span>] =&gt; <span class="number">2</span></span><br><span class="line">[<span class="number">2</span>] =&gt; <span class="number">3</span></span><br><span class="line">[<span class="number">3</span>] =&gt; <span class="number">4</span></span><br><span class="line">[<span class="number">4</span>] =&gt; <span class="number">5</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<h5 id="Reference"><a href="#Reference" class="headerlink" title="Reference:"></a>Reference:</h5><ul>
<li><a href="http://www.w3schools.com/php/func_array_range.asp" target="_blank" rel="noopener">PHP range() Function</a></li>
</ul>
<hr>
<h4 id="Move-a-file-in-server"><a href="#Move-a-file-in-server" class="headerlink" title="Move a file in server"></a>Move a file in server</h4><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> $source      = <span class="string">'/source/path/to/your/file.jpg'</span>;</span><br><span class="line"><span class="keyword">var</span> $destination = <span class="string">'/destination/path/to/your/file.jpg'</span>;</span><br><span class="line"></span><br><span class="line">rename($source, $destination);</span><br></pre></td></tr></table></figure>
<h5 id="Reference-1"><a href="#Reference-1" class="headerlink" title="Reference:"></a>Reference:</h5><ul>
<li><a href="http://stackoverflow.com/questions/8206011/how-can-i-move-a-file-to-another-folder-using-php#answers" target="_blank" rel="noopener">How can I move a file to another folder using php?</a></li>
</ul>
<hr>
<h4 id="Create-intermediate-directory"><a href="#Create-intermediate-directory" class="headerlink" title="Create intermediate directory"></a>Create intermediate directory</h4><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$path = <span class="string">'/path/to/your/dir'</span>;</span><br><span class="line">mkdir($path, <span class="number">0777</span>, <span class="keyword">true</span>);</span><br></pre></td></tr></table></figure>
<p>The <strong>3rd</strong> argument is allowed to create intermediate directory.</p>
<h5 id="Reference-2"><a href="#Reference-2" class="headerlink" title="Reference:"></a>Reference:</h5><ul>
<li><a href="http://php.net/manual/en/function.mkdir.php" target="_blank" rel="noopener">PHP - mkdir</a></li>
</ul>
<hr>
<h4 id="Get-client-located-country-info"><a href="#Get-client-located-country-info" class="headerlink" title="Get client located country info"></a>Get client located country info</h4><p>We make use of <a href="http://www.hostip.info/" target="_blank" rel="noopener">hostip.info</a> api to get the location details.</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">$url = <span class="string">'http://api.hostip.info/get_json.php?ip='</span> . $_SERVER[<span class="string">'REMOTE_ADDR'</span>];</span><br><span class="line"></span><br><span class="line">$ch = curl_init();</span><br><span class="line">curl_setopt($ch, CURLOPT_URL, $url);</span><br><span class="line">ob_start();</span><br><span class="line">curl_exec($ch);</span><br><span class="line">$content = ob_get_contents();</span><br><span class="line">ob_end_clean();</span><br><span class="line">curl_close($ch);</span><br><span class="line"></span><br><span class="line">$result = json_decode($content);</span><br></pre></td></tr></table></figure>
<hr>
<h4 id="Get-the-date-x-days-before"><a href="#Get-the-date-x-days-before" class="headerlink" title="Get the date x days before"></a>Get the date <code>x</code> days before</h4><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * The format is 'Y-m-d' (i.e. 2013-02-26)</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getPreviousDateFromDate</span><span class="params">($date, $days_ago)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> date(<span class="string">'Y-m-d'</span>, strtotime($date . <span class="string">' -'</span> . $days_ago . <span class="string">' days'</span>));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<h4 id="Inner-function-to-access-outer-function’s-variable"><a href="#Inner-function-to-access-outer-function’s-variable" class="headerlink" title="Inner function to access outer function’s variable"></a>Inner function to access outer function’s variable</h4><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">outer</span><span class="params">($foo)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// now the inner want to use the variable 'foo'</span></span><br><span class="line">    $inner = <span class="function"><span class="keyword">function</span><span class="params">()</span> <span class="title">use</span> <span class="params">($foo)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">echo</span> $foo;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    $inner();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>the <strong><code>use</code></strong> keyword is to let the inner function to access the outer function’s variable</p>
<h5 id="Reference-3"><a href="#Reference-3" class="headerlink" title="Reference:"></a>Reference:</h5><ul>
<li><a href="http://stackoverflow.com/questions/8393121/how-to-access-variable-from-scope-of-parent-function#answer-8393242" target="_blank" rel="noopener">How to access variable from scope of parent function?</a></li>
</ul>
<hr>
<h4 id="Convert-array-to-query-string"><a href="#Convert-array-to-query-string" class="headerlink" title="Convert array to query string"></a>Convert array to query string</h4><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$params = <span class="keyword">array</span>(</span><br><span class="line">    <span class="string">'p1'</span> =&gt; <span class="string">'value1'</span>,</span><br><span class="line">    <span class="string">'p2'</span> =&gt; <span class="string">'value2'</span>,</span><br><span class="line">);</span><br><span class="line">$query_string = http_build_query($params);</span><br><span class="line"></span><br><span class="line"><span class="keyword">echo</span> $query_string; <span class="comment">// p1=value1&amp;p2=value2</span></span><br></pre></td></tr></table></figure>
<h5 id="Reference-4"><a href="#Reference-4" class="headerlink" title="Reference:"></a>Reference:</h5><ul>
<li><a href="http://stackoverflow.com/questions/400805/php-function-to-build-query-string-from-array#answers" target="_blank" rel="noopener">PHP function to build query string from array</a></li>
</ul>
<hr>
<h4 id="Removed-attributes-accept-href"><a href="#Removed-attributes-accept-href" class="headerlink" title="Removed  attributes accept href"></a>Removed <strong><a></a></strong> attributes accept <strong>href</strong></h4><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">$html = <span class="string">'This is a &lt;a id="lnk" href="http://www.google.com" id="lnk"&gt;Google link&lt;/a&gt; for you.'</span></span><br><span class="line">. <span class="string">' This is another &lt;a id="lnk" href="http://www.facebook.com"&gt;Facebook link&lt;/a&gt; for you'</span>;</span><br><span class="line"></span><br><span class="line">$new_content = preg_replace(<span class="string">'/&lt;a\s[^&gt;]*href=\"([^\"]*)\"[^&gt;]*&gt;(.*)&lt;\/a&gt;/siU'</span>, <span class="string">'&lt;a href="$1"&gt;$2&lt;/a&gt;'</span>, $html);</span><br><span class="line"></span><br><span class="line"><span class="keyword">echo</span> $new_content;</span><br></pre></td></tr></table></figure>
<p>The result will be</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">This is <span class="selector-tag">a</span> &lt;<span class="selector-tag">a</span> href=<span class="string">"http://www.google.com"</span>&gt;Google link&lt;/a&gt; <span class="keyword">for</span> you. This is another &lt;<span class="selector-tag">a</span> href=<span class="string">"http://www.facebook.com"</span>&gt;Facebook link&lt;/a&gt; <span class="keyword">for</span> you</span><br></pre></td></tr></table></figure>
<h5 id="Reference-5"><a href="#Reference-5" class="headerlink" title="Reference:"></a>Reference:</h5><ul>
<li><a href="http://www.the-art-of-web.com/php/parse-links/#.Ub7Yrvb89Yg" target="_blank" rel="noopener">PHP: Parsing HTML to find Links</a></li>
</ul>
<hr>
<h4 id="Check-whether-is-POST-request"><a href="#Check-whether-is-POST-request" class="headerlink" title="Check whether is POST request"></a>Check whether is POST request</h4><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">is_post</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> $_SERVER[<span class="string">'REQUEST_METHOD'</span>] === <span class="string">'POST'</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="Reference-6"><a href="#Reference-6" class="headerlink" title="Reference:"></a>Reference:</h5><ul>
<li><a href="http://stackoverflow.com/questions/1372147/check-whether-a-request-is-get-or-post/1372163#1372163" target="_blank" rel="noopener">Check whether a request is GET or POST [duplicate]</a></li>
</ul>
<hr>
<h4 id="URL-from-text-href"><a href="#URL-from-text-href" class="headerlink" title="URL from text (href)"></a>URL from text (href)</h4><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">url_from_text</span><span class="params">($text)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// The Regular Expression filter</span></span><br><span class="line">    $reg_exUrl = <span class="string">"/(http|https|ftp|ftps)\:\/\/[a-zA-Z0-9\-\.]+\.[a-zA-Z]&#123;2,3&#125;(\/\S*)?/"</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// The Text you want to filter for urls</span></span><br><span class="line">    $text = <span class="string">"The text you want to filter goes here. http://google.com"</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Check if there is a url in the text</span></span><br><span class="line">    <span class="keyword">if</span>(preg_match($reg_exUrl, $text, $url)) &#123;</span><br><span class="line">        <span class="comment">// make the urls hyper links</span></span><br><span class="line">        <span class="keyword">return</span> preg_replace($reg_exUrl, <span class="string">'&lt;a href="'</span> . $url[<span class="number">0</span>] . <span class="string">'"&gt;'</span> . $url[<span class="number">0</span>] . <span class="string">'&lt;/a&gt;'</span>, $text);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// if no urls in the text just return the text</span></span><br><span class="line">        <span class="keyword">return</span> $text;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="Reference-7"><a href="#Reference-7" class="headerlink" title="Reference:"></a>Reference:</h5><ul>
<li><a href="http://css-tricks.com/snippets/php/find-urls-in-text-make-links/" target="_blank" rel="noopener">Find URLs in Text, Make Links</a></li>
</ul>
<hr>
<h4 id="Get-last-month-date-range"><a href="#Get-last-month-date-range" class="headerlink" title="Get last month date range"></a>Get last month date range</h4><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$first_day_prev_month = date(<span class="string">'Y-m-1'</span>, strtotime(<span class="string">'first day of previous month'</span>));</span><br><span class="line">$last_day_prev_month = date(<span class="string">'Y-m-t'</span>, strtotime(<span class="string">'first day of previous month'</span>));</span><br></pre></td></tr></table></figure>
<h5 id="Reference-8"><a href="#Reference-8" class="headerlink" title="Reference:"></a>Reference:</h5><ul>
<li><a href="http://stackoverflow.com/questions/1889758/getting-last-months-date-in-php/5180731#5180731" target="_blank" rel="noopener">Getting last month’s date in php</a></li>
</ul>
<hr>
<h4 id="fgetcsv-read-all-as-ONE-line"><a href="#fgetcsv-read-all-as-ONE-line" class="headerlink" title="fgetcsv read all as ONE line"></a><code>fgetcsv</code> read all as ONE line</h4><p>This is due to End-of-Line (EOL) problem in different environment (Windows is different from UNIX)</p>
<p>The <strong>EOL</strong> in Windows is <code>^M</code>, you can see this if you try to open via VIM.</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span> (($data = fgetcsv($handle, <span class="number">10000</span>)) !== <span class="keyword">FALSE</span>) &#123;</span><br><span class="line">    print_r($data);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>If you read the file which contains of <code>^M</code> character, then everything will be in a single line.</p>
<p>In order to solve this, add this before the <code>while</code> statement</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ini_set(<span class="string">'auto_detect_line_endings'</span>, <span class="keyword">true</span>);</span><br></pre></td></tr></table></figure>
<h5 id="Reference-9"><a href="#Reference-9" class="headerlink" title="Reference:"></a>Reference:</h5><ul>
<li><a href="http://stackoverflow.com/questions/5539053/php-fgetcsv-returning-all-lines/5541319#5541319" target="_blank" rel="noopener">php fgetcsv returning all lines</a></li>
</ul>
<hr>
<h4 id="Loop-through-dates"><a href="#Loop-through-dates" class="headerlink" title="Loop through dates"></a>Loop through dates</h4><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Start date</span></span><br><span class="line">$start_date = <span class="string">'2013-12-06'</span>;</span><br><span class="line"><span class="comment">// End date</span></span><br><span class="line">$end_date = <span class="string">'2014-04-20'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> (strtotime($start_date) &lt;= strtotime($end_date)) &#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">"$start_date\n"</span>;</span><br><span class="line">    $start_date = date(<span class="string">'Y-m-d'</span>, strtotime(<span class="string">'+1 day'</span>, strtotime($start_date)));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="Reference-10"><a href="#Reference-10" class="headerlink" title="Reference:"></a>Reference:</h5><ul>
<li><a href="http://www.if-not-true-then-false.com/2009/php-loop-through-dates-from-date-to-date-with-strtotime-function/" target="_blank" rel="noopener">PHP: Loop through dates (from date to date) with strtotime() function</a></li>
</ul>
<hr>
<h4 id="Get-image-type"><a href="#Get-image-type" class="headerlink" title="Get image type"></a>Get image type</h4><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">switch</span>(exif_imagetype(<span class="string">'image/foo.jpg'</span>)) &#123;</span><br><span class="line">    <span class="keyword">case</span> IMAGETYPE_JPEG:</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">'JPEG'</span>;</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">case</span> IMAGETYPE_PNG:</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">'JPEG'</span>;</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="Reference-11"><a href="#Reference-11" class="headerlink" title="Reference:"></a>Reference:</h5><ul>
<li><a href="http://www.php.net/manual/en/function.exif-imagetype.php" target="_blank" rel="noopener">exif_imagetype</a></li>
</ul>
<hr>
<h4 id="Insert-a-string-into-another-string"><a href="#Insert-a-string-into-another-string" class="headerlink" title="Insert a string into another string"></a>Insert a string into another string</h4><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$str = <span class="string">'abc123'</span>;</span><br><span class="line">$result = substr_replace($str, <span class="string">'-'</span>, <span class="number">3</span>, <span class="number">0</span>);</span><br><span class="line"><span class="keyword">echo</span> $result;</span><br><span class="line"></span><br><span class="line"><span class="comment">// output</span></span><br><span class="line"><span class="comment">// abc-123</span></span><br></pre></td></tr></table></figure>
<h5 id="Reference-12"><a href="#Reference-12" class="headerlink" title="Reference:"></a>Reference:</h5><ul>
<li><a href="http://stackoverflow.com/questions/1372737/how-to-insert-a-string-inside-another-string/1372765#1372765" target="_blank" rel="noopener">How to insert a string inside another string?</a></li>
</ul>
<hr>
<h4 id="Re-format-date-using-preg-replace"><a href="#Re-format-date-using-preg-replace" class="headerlink" title="Re-format date using preg_replace"></a>Re-format date using <code>preg_replace</code></h4><p>e.g. Format a date with <code>dd/mm/yyyy</code> to <code>yyyy-mm-dd</code></p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$date = <span class="string">'31/08/1987'</span>;</span><br><span class="line"></span><br><span class="line">$pattern = <span class="string">'/^(\d&#123;2&#125;)\/(\d&#123;2&#125;)\/(\d&#123;4&#125;)$/'</span>;</span><br><span class="line">$replacement = <span class="string">'$3-$2-$1'</span>;</span><br><span class="line"></span><br><span class="line">$formatted_date = preg_replace($pattern, $replacement, $date);</span><br><span class="line"><span class="keyword">echo</span> $formatted_date;</span><br></pre></td></tr></table></figure>
<p>Output:</p>
<figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1987</span><span class="number">-08</span><span class="number">-31</span></span><br></pre></td></tr></table></figure>
<ul>
<li><code>(\d{2})</code> - the braces is to keep a reference that can use it later <em>(i.e. <code>$1</code>)</em>. Where <code>\d</code> is to match integer only and <code>{2}</code> is exactly 2 characters</li>
<li><code>\/</code> - because the slash <em>(/)</em> is a special character, so have to use backslash <em>(\)</em> to escape it</li>
<li><code>$3-$2-$1</code> - is the sequence of the submatch <em>(i.e. <code>(\d{2})</code> those inside the braces)</em></li>
</ul>
<h5 id="Reference-13"><a href="#Reference-13" class="headerlink" title="Reference:"></a>Reference:</h5><ul>
<li><a href="http://my1.php.net/preg_replace#example-4797" target="_blank" rel="noopener">preg_replace</a></li>
</ul>
<hr>
<h4 id="iPad-photo-orientation-issue-by-rotate-image-manually"><a href="#iPad-photo-orientation-issue-by-rotate-image-manually" class="headerlink" title="iPad photo orientation issue by rotate image manually"></a>iPad photo orientation issue by rotate image manually</h4><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">resample</span><span class="params">($jpgFile, $thumbFile, $width, $orientation)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// Get new dimensions</span></span><br><span class="line">    <span class="keyword">list</span>($width_orig, $height_orig) = getimagesize($jpgFile);</span><br><span class="line">    $height = (int) (($width / $width_orig) * $height_orig);</span><br><span class="line">    <span class="comment">// Resample</span></span><br><span class="line">    $image_p = imagecreatetruecolor($width, $height);</span><br><span class="line">    $image   = imagecreatefromjpeg($jpgFile);</span><br><span class="line">    imagecopyresampled($image_p, $image, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, $width, $height, $width_orig, $height_orig);</span><br><span class="line">    <span class="comment">// Fix Orientation</span></span><br><span class="line">    <span class="keyword">switch</span>($orientation) &#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">3</span>: <span class="comment">// 180 rotate left</span></span><br><span class="line">            $image_p = imagerotate($image_p, <span class="number">180</span>, <span class="number">0</span>);</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">6</span>: <span class="comment">// 90 rotate right</span></span><br><span class="line">            $image_p = imagerotate($image_p, <span class="number">-90</span>, <span class="number">0</span>);</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> <span class="number">8</span>: <span class="comment">// // 90 rotate left</span></span><br><span class="line">            $image_p = imagerotate($image_p, <span class="number">90</span>, <span class="number">0</span>);</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// Output</span></span><br><span class="line">    imagejpeg($image_p, $thumbFile, <span class="number">90</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="Reference-14"><a href="#Reference-14" class="headerlink" title="Reference:"></a>Reference:</h5><ul>
<li><a href="http://stackoverflow.com/questions/7489742/php-read-exif-data-and-adjust-orientation/9207128#9207128" target="_blank" rel="noopener">PHP read_exif_data and Adjust Orientation</a></li>
</ul>
<hr>
<h4 id="Remove-all-html-tags-amp-replace-amp-nbsp-to-lt-space-gt"><a href="#Remove-all-html-tags-amp-replace-amp-nbsp-to-lt-space-gt" class="headerlink" title="Remove all html tags &amp; replace &amp;nbsp; to &lt;space&gt;"></a>Remove all html tags &amp; replace <code>&amp;nbsp;</code> to <code>&lt;space&gt;</code></h4><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">str_replace(<span class="string">'&amp;nbsp;'</span>, <span class="string">' '</span>, strip_tags($description));</span><br></pre></td></tr></table></figure>
<hr>
<h4 id="Replace-new-line-character-with"><a href="#Replace-new-line-character-with" class="headerlink" title="Replace new line character with "></a>Replace new line character with <space></space></h4><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$new_text = str_replace(<span class="keyword">array</span>(<span class="string">"\r"</span>, <span class="string">"\r\n"</span>, <span class="string">"\n"</span>), <span class="string">' '</span>, $text);</span><br></pre></td></tr></table></figure>
<h5 id="Reference-15"><a href="#Reference-15" class="headerlink" title="Reference:"></a>Reference:</h5><ul>
<li><a href="http://www.sourcecodester.com/tutorials/php/how-replace-newline-with-space-using-php.html" target="_blank" rel="noopener">How to Replace Newline with Space Using PHP</a></li>
</ul>
<hr>
<h4 id="Regex-match-any-characters-INCLUDING"><a href="#Regex-match-any-characters-INCLUDING" class="headerlink" title="Regex match any characters INCLUDING "></a>Regex match any characters INCLUDING <new line></new></h4><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">$content = <span class="string">&lt;&lt;&lt;EOD</span></span><br><span class="line"><span class="string">&lt;html&gt;</span></span><br><span class="line"><span class="string">    &lt;title&gt;Test&lt;/title&gt;</span></span><br><span class="line"><span class="string">    &lt;body&gt;</span></span><br><span class="line"><span class="string">        &lt;div id="some-div"&gt;</span></span><br><span class="line"><span class="string">            Some text here</span></span><br><span class="line"><span class="string">        &lt;/div&gt;</span></span><br><span class="line"><span class="string">    &lt;/body&gt;</span></span><br><span class="line"><span class="string">&lt;/html&gt;</span></span><br><span class="line"><span class="string">EOD;</span></span><br><span class="line">$pattern = <span class="string">'/&lt;body.*&gt;(.*)&lt;\/body&gt;/s'</span>; <span class="comment">// the last characters 's' is to match new line as well</span></span><br><span class="line">preg_match($pattern, $content, $result);</span><br></pre></td></tr></table></figure>
<p><code>$result[0]</code> will give you</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"some-div"</span>&gt;</span></span><br><span class="line">    Some text here</span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h5 id="Reference-16"><a href="#Reference-16" class="headerlink" title="Reference:"></a>Reference:</h5><ul>
<li><a href="http://stackoverflow.com/questions/159118/how-do-i-match-any-character-across-multiple-lines-in-a-regular-expression/159139#159139" target="_blank" rel="noopener">How do I match any character across multiple lines in a regular expression?</a></li>
</ul>
<hr>
<h4 id="Receive-json-value-from-HTTP-POST"><a href="#Receive-json-value-from-HTTP-POST" class="headerlink" title="Receive json value from HTTP POST"></a>Receive <code>json</code> value from HTTP POST</h4><p>This will show nothing</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">print_r($_POST);</span><br></pre></td></tr></table></figure>
<p>In order to get the value</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$json = file_get_contents(<span class="string">'php://input'</span>);</span><br><span class="line"><span class="keyword">if</span> ($json) &#123;</span><br><span class="line">    $post = json_decode($json, <span class="keyword">true</span>);</span><br><span class="line">&#125;</span><br><span class="line">print_r($post);</span><br><span class="line"><span class="comment">// access via $post['param1']</span></span><br></pre></td></tr></table></figure>
<h5 id="Reference-17"><a href="#Reference-17" class="headerlink" title="Reference:"></a>Reference:</h5><ul>
<li><a href="http://stackoverflow.com/questions/18866571/receive-json-post-with-php/18867369#18867369" target="_blank" rel="noopener">receive json post with php</a></li>
</ul>
<hr>
<h4 id="Error-on-mysqli"><a href="#Error-on-mysqli" class="headerlink" title="Error on mysqli"></a>Error on mysqli</h4><p>The error message was <code>No such file or directory</code></p>
<p><strong>Solution</strong><br>simply change the host to <code>127.0.0.1</code> instead of <code>localhost</code></p>
<h5 id="Reference-18"><a href="#Reference-18" class="headerlink" title="Reference:"></a>Reference:</h5><ul>
<li><a href="http://stackoverflow.com/questions/1676688/php-mysql-connection-not-working-2002-no-such-file-or-directory/6959675#6959675" target="_blank" rel="noopener">PHP - MySQL connection not working: 2002 No such file or directory</a></li>
</ul>
<hr>
<h4 id="Save-web-image-into-file"><a href="#Save-web-image-into-file" class="headerlink" title="Save web image into file"></a>Save web image into file</h4><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">save_image</span><span class="params">($url, $dest_path)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// get the file extension</span></span><br><span class="line">    $ext = pathinfo($url, PATHINFO_EXTENSION);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// make sure the file name is unique, so use microtime here</span></span><br><span class="line">    $filename = str_replace(<span class="keyword">array</span>(<span class="string">'0.'</span>, <span class="string">' '</span>), <span class="keyword">array</span>(<span class="string">''</span>, <span class="string">''</span>), microtime()) . <span class="string">'.'</span> . $ext;</span><br><span class="line"></span><br><span class="line">    $ch = curl_init($url);</span><br><span class="line">    $fp = fopen($dest_path.<span class="string">'/'</span>.ltrim($filename, <span class="string">'/'</span>), <span class="string">'wb'</span>);</span><br><span class="line">    curl_setopt($ch, CURLOPT_FILE, $fp);</span><br><span class="line">    curl_setopt($ch, CURLOPT_HEADER, <span class="number">0</span>);</span><br><span class="line">    curl_exec($ch);</span><br><span class="line">    curl_close($ch);</span><br><span class="line">    fclose($fp);</span><br><span class="line">    <span class="comment">// return the new filename at the end</span></span><br><span class="line">    <span class="keyword">return</span> $filename;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="References"><a href="#References" class="headerlink" title="References:"></a>References:</h5><ul>
<li><a href="http://stackoverflow.com/questions/724391/saving-image-from-php-url-using-php/724449#724449" target="_blank" rel="noopener">Saving image from PHP URL using PHP</a></li>
<li><a href="http://stackoverflow.com/questions/10368217/how-to-get-the-file-extension-in-php/10368236#10368236" target="_blank" rel="noopener">How to get the file extension in PHP? [duplicate]</a></li>
</ul>
<hr>
<h4 id="Regex-validation-for-color-code-hex"><a href="#Regex-validation-for-color-code-hex" class="headerlink" title="Regex validation for color code hex"></a>Regex validation for color code hex</h4><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(preg_match(<span class="string">'/^#?([a-f0-9]&#123;6&#125;|[a-f0-9]&#123;3&#125;)$/'</span>, $hex))</span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// correct format</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>The regex above check the optional hash <em>(#)</em> and accept either <strong>3</strong> or <strong>6</strong> characters.</p>
<h5 id="Reference-19"><a href="#Reference-19" class="headerlink" title="Reference:"></a>Reference:</h5><ul>
<li><a href="http://culttt.com/2014/01/20/extending-laravel-4-validator/" target="_blank" rel="noopener">Extending the Laravel 4 Validator</a></li>
</ul>
<hr>
<h4 id="Updated-all-null-to-empty-string-in-an-array"><a href="#Updated-all-null-to-empty-string-in-an-array" class="headerlink" title="Updated all null to empty string in an array"></a>Updated all <code>null</code> to empty string in an array</h4><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">null_to_empty_str</span><span class="params">($obj)</span> </span>&#123;</span><br><span class="line">    $new_json_array = <span class="keyword">array</span>();</span><br><span class="line">    <span class="keyword">foreach</span> ($obj <span class="keyword">as</span> $k =&gt; $v) &#123;</span><br><span class="line">        <span class="keyword">if</span> (is_array($v)) &#123;</span><br><span class="line">            $new_json_array[$k] = null_to_empty_str($v);</span><br><span class="line">            <span class="keyword">continue</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> ($v === <span class="keyword">null</span>) &#123;</span><br><span class="line">            $new_json_array[$k] = <span class="string">''</span>;</span><br><span class="line">            <span class="keyword">continue</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        $new_json_array[$k] = $v;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> $new_json_array;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<h4 id="phpMyAdmin-auto-login"><a href="#phpMyAdmin-auto-login" class="headerlink" title="phpMyAdmin auto login"></a>phpMyAdmin auto login</h4><p>Edit the file <strong>config.inc.php</strong></p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// change from 'cookie' to 'config'</span></span><br><span class="line">$cfg[<span class="string">'Servers'</span>][$i][<span class="string">'auth_type'</span>] = <span class="string">'config'</span>;</span><br><span class="line"><span class="comment">// add root username &amp; password</span></span><br><span class="line">$cfg[<span class="string">'Servers'</span>][$i][<span class="string">'user'</span>] = <span class="string">'root'</span>;</span><br><span class="line">$cfg[<span class="string">'Servers'</span>][$i][<span class="string">'password'</span>] = <span class="string">'root_pass'</span>;</span><br></pre></td></tr></table></figure>
<h5 id="Reference-20"><a href="#Reference-20" class="headerlink" title="Reference:"></a>Reference:</h5><ul>
<li><a href="http://www.devraju.com/php/avoid-login-screen-in-phpmyadmin-and-auto-login/" target="_blank" rel="noopener">Avoid login screen in phpmyadmin and auto login</a></li>
</ul>
<hr>
<h4 id="Make-use-of-array-map-to-create-key-value-array"><a href="#Make-use-of-array-map-to-create-key-value-array" class="headerlink" title="Make use of array_map to create key-value array"></a>Make use of <code>array_map</code> to create key-value array</h4><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">$original = [</span><br><span class="line">    <span class="number">0</span> =&gt; [<span class="string">'id'</span> =&gt; <span class="string">'js'</span>, <span class="string">'name'</span> =&gt; <span class="string">'foo'</span>],</span><br><span class="line">    <span class="number">1</span> =&gt; [<span class="string">'id'</span> =&gt; <span class="string">'lim'</span>, <span class="string">'name'</span> =&gt; <span class="string">'bar'</span>],</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line">$options = [];</span><br><span class="line">array_map(<span class="function"><span class="keyword">function</span><span class="params">($obj)</span> <span class="title">use</span> <span class="params">(&amp;$options)</span> </span>&#123;</span><br><span class="line">    $options[$obj[<span class="string">'id'</span>]] = $obj[<span class="string">'name'</span>];</span><br><span class="line">&#125;, $original);</span><br><span class="line"></span><br><span class="line">print_r($options);</span><br></pre></td></tr></table></figure>
<p>Result will be:</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Array</span>(</span><br><span class="line">    <span class="string">'js'</span> =&gt; <span class="string">'foo'</span>,</span><br><span class="line">    <span class="string">'lim'</span> =&gt; <span class="string">'bar'</span>,</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<h5 id="Reference-21"><a href="#Reference-21" class="headerlink" title="Reference:"></a>Reference:</h5><ul>
<li><a href="http://php.net/manual/en/function.array-map.php" target="_blank" rel="noopener">PHP: array_map</a></li>
</ul>
<hr>
<h4 id="Call-static-method-by-dynamic-class"><a href="#Call-static-method-by-dynamic-class" class="headerlink" title="Call static method by dynamic class"></a>Call static method by dynamic class</h4><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">$class_name = <span class="string">'FooBar'</span>;</span><br><span class="line">$class_name::callMethod($arg1...);</span><br></pre></td></tr></table></figure>
<p>If want to initialize</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">$obj = <span class="keyword">new</span> $class_name();</span><br></pre></td></tr></table></figure>
<hr>
<h4 id="Replace-html-tag-by-regex"><a href="#Replace-html-tag-by-regex" class="headerlink" title="Replace html tag by regex"></a>Replace html tag by regex</h4><p>Let say replace <code>&lt;a&gt;</code> to <code>&lt;em&gt;</code></p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">$html = <span class="string">'&lt;strong&gt;No 1.&lt;/strong&gt; This is a &lt;a href="..."&gt;Link&lt;/a&gt;'</span>;</span><br><span class="line">preg_replace_callback(<span class="string">'(&lt;a.*&gt;(.*?)&lt;/a&gt;)'</span>, <span class="function"><span class="keyword">function</span><span class="params">($a)</span> </span>&#123;<span class="keyword">return</span> <span class="string">'&lt;em&gt;'</span> . $a[<span class="number">1</span>] . <span class="string">'&lt;/em&gt;'</span>);&#125;, $html);</span><br></pre></td></tr></table></figure>
<h5 id="Reference-22"><a href="#Reference-22" class="headerlink" title="Reference:"></a>Reference:</h5><ul>
<li><a href="http://stackoverflow.com/questions/14658732/how-to-replace-first-html-strong-strong-tag-in-php/14658760#14658760" target="_blank" rel="noopener">How To Replace First HTML &lt;strong&gt;&lt;/strong&gt; Tag in PHP</a></li>
</ul>
<hr>
<h4 id="Call-dynamic-class-static-function"><a href="#Call-dynamic-class-static-function" class="headerlink" title="Call dynamic class static function"></a>Call dynamic class static function</h4><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">$class_name = <span class="string">'Helpers\DateHelper'</span>;</span><br><span class="line">$result = call_user_func($class_name . <span class="string">'::convert'</span>, <span class="string">'2018-04-30'</span>, <span class="string">'M d, Y'</span>);</span><br></pre></td></tr></table></figure>
<p>This is equivalent to <code>Helpers\DateHelper::convert(&#39;2018-04-30&#39;, &#39;M d, Y&#39;)</code></p>
<h5 id="Reference-23"><a href="#Reference-23" class="headerlink" title="Reference:"></a>Reference:</h5><ul>
<li><a href="https://stackoverflow.com/questions/2108795/dynamic-static-method-call-in-php/2108809#2108809" target="_blank" rel="noopener">Dynamic static method call in PHP?</a></li>
</ul>
<hr>
<h3 id="DOMDocument"><a href="#DOMDocument" class="headerlink" title="DOMDocument"></a>DOMDocument</h3><p>Using this with <a href="https://symfony.com/doc/current/components/dom_crawler.html" target="_blank" rel="noopener">Symfony DomCrawler</a>.</p>
<h4 id="Append-new-element"><a href="#Append-new-element" class="headerlink" title="Append new element"></a>Append new element</h4><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="keyword">use</span> <span class="title">Symfony</span>\<span class="title">Component</span>\<span class="title">DomCrawler</span>\<span class="title">Crawler</span> <span class="title">as</span> <span class="title">DomCrawler</span>;</span><br><span class="line"></span><br><span class="line">$html = ....;</span><br><span class="line">$doc = <span class="keyword">new</span> \DOMDocument;</span><br><span class="line">$doc-&gt;loadHtml($html);</span><br><span class="line">$crawler = <span class="keyword">new</span> DomCrawler($doc);</span><br><span class="line">$row_nodes = $crawler-&gt;filter(<span class="string">'.rows'</span>);</span><br><span class="line"><span class="comment">// loop through each .row</span></span><br><span class="line"><span class="keyword">foreach</span> ($row_nodes <span class="keyword">as</span> $node) &#123;</span><br><span class="line">    $div_col = $doc-&gt;createElement(<span class="string">'div'</span>);</span><br><span class="line">    $div_col-&gt;setAttribute(<span class="string">'class'</span>, <span class="string">'col-md-12'</span>);</span><br><span class="line">    $div_col-&gt;textContent = <span class="string">'This is the inner html content'</span>;</span><br><span class="line">    $node-&gt;appendChild($div_col);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">echo</span> $crawler-&gt;html();</span><br></pre></td></tr></table></figure>
<h5 id="Reference-24"><a href="#Reference-24" class="headerlink" title="Reference:"></a>Reference:</h5><ul>
<li><a href="https://stackoverflow.com/questions/40862303/how-to-add-a-xml-node-to-a-symfony-crawler/48310668#48310668" target="_blank" rel="noopener">how to add a xml node to a symfony Crawler()</a></li>
</ul>
<hr>
<h3 id="Facebook"><a href="#Facebook" class="headerlink" title="Facebook"></a>Facebook</h3><h4 id="Initialize-the-facebook-object"><a href="#Initialize-the-facebook-object" class="headerlink" title="Initialize the facebook object"></a>Initialize the facebook object</h4><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$facebook = <span class="keyword">new</span> Facebook(<span class="keyword">array</span>(</span><br><span class="line">    <span class="string">'appId'</span> =&gt; <span class="string">'&lt;your app id here&gt;'</span>,</span><br><span class="line">    <span class="string">'secret'</span> =&gt; <span class="string">'&lt;your app secret here&gt;'</span>,</span><br><span class="line">));</span><br></pre></td></tr></table></figure>
<hr>
<h4 id="Get-current-user’s-allowed-permission"><a href="#Get-current-user’s-allowed-permission" class="headerlink" title="Get current user’s allowed permission"></a>Get current user’s allowed permission</h4><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$permissions = $facebook-&gt;api(<span class="string">'/me/permissions'</span>);</span><br><span class="line">print_r($permissions);</span><br></pre></td></tr></table></figure>
<hr>
<h4 id="Get-current-user’s-info"><a href="#Get-current-user’s-info" class="headerlink" title="Get current user’s info"></a>Get current user’s info</h4><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$user = $facebook-&gt;api(<span class="string">'/me'</span>);</span><br></pre></td></tr></table></figure>
<hr>
<h3 id="TCPDF"><a href="#TCPDF" class="headerlink" title="TCPDF"></a>TCPDF</h3><h4 id="Align-height-of-HTML-table-row"><a href="#Align-height-of-HTML-table-row" class="headerlink" title="Align height of HTML table row"></a>Align height of HTML table row</h4><p>Adjust the <code>line-height</code> &amp; <code>font-size</code>, otherwise it won’t work.</p>
<p>Example</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">table</span> <span class="attr">cellpadding</span>=<span class="string">"0"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tr</span> <span class="attr">style</span>=<span class="string">"line-height: 5px; font-size: 4px;"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>Your content here<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><strong>NOTE: margin &amp; padding properties won’t work here</strong></p>
<h5 id="Reference-TCPDF-Is-there-a-way-to-adjust-single-table-row-height"><a href="#Reference-TCPDF-Is-there-a-way-to-adjust-single-table-row-height" class="headerlink" title="Reference: TCPDF - Is there a way to adjust single table row height?"></a>Reference: <a href="http://stackoverflow.com/questions/19294288/tcpdf-is-there-a-way-to-adjust-single-table-row-height/19351885#19351885" target="_blank" rel="noopener">TCPDF - Is there a way to adjust single table row height?</a></h5><hr>
<h3 id="WideImage"><a href="#WideImage" class="headerlink" title="WideImage"></a>WideImage</h3><h4 id="Resize-image-proportionally-by-height"><a href="#Resize-image-proportionally-by-height" class="headerlink" title="Resize image proportionally by height"></a>Resize image proportionally by height</h4><p>Example shows resize the image to <strong>any width</strong> but exactly <strong>100px height</strong></p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$img = WideImage::load(<span class="string">'/path/to/image.jpg'</span>);</span><br><span class="line">$img-&gt;resize($img-&gt;getWidth(), <span class="number">100</span>)-&gt;saveToFile(<span class="string">'/destination/image.jpg'</span>);</span><br></pre></td></tr></table></figure>
<p>Set the <strong>width</strong> to original image size will achieve this.</p>
<hr>
<h4 id="Create-empty-image-from-text"><a href="#Create-empty-image-from-text" class="headerlink" title="Create empty image from text"></a>Create empty image from text</h4><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// create emptye image with 100x100 size</span></span><br><span class="line">$wideImage = \WideImage_TrueColorImage::create(<span class="number">100</span>, <span class="number">100</span>);</span><br><span class="line"><span class="comment">// set the background transparent</span></span><br><span class="line">$wideImage-&gt;fill(<span class="number">0</span>,<span class="number">0</span>, $wideImage-&gt;getTransparentColor());</span><br><span class="line"><span class="comment">// get the canvas and write text on it</span></span><br><span class="line">$canvas = $wideImage-&gt;getCanvas();</span><br><span class="line"><span class="comment">// set the font with size 30 and font color to white</span></span><br><span class="line">$canvas-&gt;useFont(<span class="string">'/path/to/fonts/Helvetica-Bold.otf'</span>, <span class="number">30</span>, $wideImage-&gt;allocateColor(<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>));</span><br><span class="line"><span class="comment">// write text to canvas</span></span><br><span class="line">$canvas-&gt;writeText(<span class="string">'center'</span>, <span class="string">'center'</span>, <span class="string">'Your text goes here'</span>);</span><br><span class="line"><span class="comment">// save to file</span></span><br><span class="line">$wideImage-&gt;saveToFile(<span class="string">'output.png'</span>);</span><br></pre></td></tr></table></figure>
<h5 id="Reference-25"><a href="#Reference-25" class="headerlink" title="Reference:"></a>Reference:</h5><ul>
<li><a href="http://stackoverflow.com/questions/11965709/wideimage-transparent-areas-of-converted-png-should-be-white/13427679#13427679" target="_blank" rel="noopener">WideImage - Transparent areas of converted PNG should be white</a></li>
</ul>
</div></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><form class="search-form" action="//www.google.com/search" method="get" accept-charset="utf-8" target="_blank"><input type="text" name="q" maxlength="20" placeholder="Search"/><input type="hidden" name="sitesearch" value="http://jslim.net"/></form></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> Categories</i></div></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> Tags</i></div><div class="tagcloud"><a href="/tags/linux/" style="font-size: 15px;">linux</a> <a href="/tags/setup-configuration/" style="font-size: 15px;">setup-configuration</a> <a href="/tags/subversion/" style="font-size: 15px;">subversion</a> <a href="/tags/vim/" style="font-size: 15px;">vim</a> <a href="/tags/fedora/" style="font-size: 15px;">fedora</a> <a href="/tags/gnome/" style="font-size: 15px;">gnome</a> <a href="/tags/windows/" style="font-size: 15px;">windows</a> <a href="/tags/php/" style="font-size: 15px;">php</a> <a href="/tags/programming/" style="font-size: 15px;">programming</a> <a href="/tags/os-x/" style="font-size: 15px;">os-x</a> <a href="/tags/mac/" style="font-size: 15px;">mac</a> <a href="/tags/command-line/" style="font-size: 15px;">command-line</a> <a href="/tags/ruby/" style="font-size: 15px;">ruby</a> <a href="/tags/octopress/" style="font-size: 15px;">octopress</a> <a href="/tags/shell-script/" style="font-size: 15px;">shell-script</a> <a href="/tags/uninstallation/" style="font-size: 15px;">uninstallation</a> <a href="/tags/ios/" style="font-size: 15px;">ios</a> <a href="/tags/javascript/" style="font-size: 15px;">javascript</a> <a href="/tags/git/" style="font-size: 15px;">git</a> <a href="/tags/python/" style="font-size: 15px;">python</a> <a href="/tags/django/" style="font-size: 15px;">django</a> <a href="/tags/mysql/" style="font-size: 15px;">mysql</a> <a href="/tags/vmware/" style="font-size: 15px;">vmware</a> <a href="/tags/sql/" style="font-size: 15px;">sql</a> <a href="/tags/zend/" style="font-size: 15px;">zend</a> <a href="/tags/c-language/" style="font-size: 15px;">c language</a> <a href="/tags/wordpress/" style="font-size: 15px;">wordpress</a> <a href="/tags/laravel/" style="font-size: 15px;">laravel</a> <a href="/tags/configuration/" style="font-size: 15px;">configuration</a> <a href="/tags/apache/" style="font-size: 15px;">apache</a> <a href="/tags/nodejs/" style="font-size: 15px;">nodejs</a> <a href="/tags/sails-js/" style="font-size: 15px;">sails.js</a> <a href="/tags/nginx/" style="font-size: 15px;">nginx</a> <a href="/tags/deployment/" style="font-size: 15px;">deployment</a> <a href="/tags/css/" style="font-size: 15px;">css</a> <a href="/tags/bootstrap3/" style="font-size: 15px;">bootstrap3</a> <a href="/tags/jquery/" style="font-size: 15px;">jquery</a> <a href="/tags/google-map/" style="font-size: 15px;">google-map</a> <a href="/tags/happyfox/" style="font-size: 15px;">happyfox</a> <a href="/tags/flot/" style="font-size: 15px;">flot</a> <a href="/tags/graph/" style="font-size: 15px;">graph</a> <a href="/tags/server/" style="font-size: 15px;">server</a> <a href="/tags/objective-c/" style="font-size: 15px;">objective-c</a> <a href="/tags/laravel4/" style="font-size: 15px;">laravel4</a> <a href="/tags/cocos2d-x/" style="font-size: 15px;">cocos2d-x</a> <a href="/tags/xcode/" style="font-size: 15px;">xcode</a> <a href="/tags/swift/" style="font-size: 15px;">swift</a> <a href="/tags/debian/" style="font-size: 15px;">debian</a> <a href="/tags/ruby-on-rails/" style="font-size: 15px;">ruby-on-rails</a> <a href="/tags/branding/" style="font-size: 15px;">branding</a> <a href="/tags/selenium/" style="font-size: 15px;">selenium</a> <a href="/tags/phantomjs/" style="font-size: 15px;">phantomjs</a> <a href="/tags/test/" style="font-size: 15px;">test</a> <a href="/tags/vagrant/" style="font-size: 15px;">vagrant</a> <a href="/tags/google-api/" style="font-size: 15px;">google-api</a> <a href="/tags/security/" style="font-size: 15px;">security</a> <a href="/tags/facebook-php-sdk/" style="font-size: 15px;">facebook-php-sdk</a> <a href="/tags/e-commerce/" style="font-size: 15px;">e-commerce</a> <a href="/tags/setup/" style="font-size: 15px;">setup</a> <a href="/tags/DirectAdmin/" style="font-size: 15px;">DirectAdmin</a> <a href="/tags/ads-platform/" style="font-size: 15px;">ads-platform</a> <a href="/tags/hacking/" style="font-size: 15px;">hacking</a> <a href="/tags/session-hijacking/" style="font-size: 15px;">session-hijacking</a> <a href="/tags/cronjob/" style="font-size: 15px;">cronjob</a> <a href="/tags/banned/" style="font-size: 15px;">banned</a> <a href="/tags/scam/" style="font-size: 15px;">scam</a> <a href="/tags/aws/" style="font-size: 15px;">aws</a> <a href="/tags/webapp/" style="font-size: 15px;">webapp</a> <a href="/tags/ssh/" style="font-size: 15px;">ssh</a> <a href="/tags/c/" style="font-size: 15px;">c#</a> <a href="/tags/winform/" style="font-size: 15px;">winform</a> <a href="/tags/nappupdate/" style="font-size: 15px;">nappupdate</a> <a href="/tags/homestead/" style="font-size: 15px;">homestead</a> <a href="/tags/devops/" style="font-size: 15px;">devops</a> <a href="/tags/angular/" style="font-size: 15px;">angular</a> <a href="/tags/http/" style="font-size: 15px;">http</a> <a href="/tags/cefsharp/" style="font-size: 15px;">cefsharp</a> <a href="/tags/ubuntu/" style="font-size: 15px;">ubuntu</a> <a href="/tags/utf-8/" style="font-size: 15px;">utf-8</a> <a href="/tags/guest-post/" style="font-size: 15px;">guest-post</a> <a href="/tags/mysql-client/" style="font-size: 15px;">mysql-client</a> <a href="/tags/config/" style="font-size: 15px;">config</a> <a href="/tags/lambda/" style="font-size: 15px;">lambda</a> <a href="/tags/node/" style="font-size: 15px;">node</a> <a href="/tags/js/" style="font-size: 15px;">js</a> <a href="/tags/tinymce/" style="font-size: 15px;">tinymce</a> <a href="/tags/guzzle/" style="font-size: 15px;">guzzle</a> <a href="/tags/laravel5/" style="font-size: 15px;">laravel5</a> <a href="/tags/eloquent/" style="font-size: 15px;">eloquent</a> <a href="/tags/subquery/" style="font-size: 15px;">subquery</a> <a href="/tags/oembed/" style="font-size: 15px;">oembed</a> <a href="/tags/datatables/" style="font-size: 15px;">datatables</a> <a href="/tags/gitlab/" style="font-size: 15px;">gitlab</a> <a href="/tags/rds/" style="font-size: 15px;">rds</a> <a href="/tags/openvpn/" style="font-size: 15px;">openvpn</a> <a href="/tags/infinite-scroll/" style="font-size: 15px;">infinite-scroll</a> <a href="/tags/google-optimize/" style="font-size: 15px;">google-optimize</a> <a href="/tags/google-analytics/" style="font-size: 15px;">google-analytics</a> <a href="/tags/ab-test/" style="font-size: 15px;">ab-test</a> <a href="/tags/query-builder/" style="font-size: 15px;">query-builder</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> Recent</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/blog/2020/04/24/Activate-Windows-10-in-VirtualBox/">Activate Windows 10 in VirtualBox</a></li><li class="post-list-item"><a class="post-list-link" href="/blog/2020/02/11/Web-development-testing-in-Android-Virtual-Device/">Web development testing in Android Virtual Device</a></li><li class="post-list-item"><a class="post-list-link" href="/blog/2020/01/22/Install-Arch-Linux/">Install Arch Linux</a></li><li class="post-list-item"><a class="post-list-link" href="/blog/2020/01/09/Why-Vue-js-emit-not-working/">Why Vue.js $emit not working</a></li><li class="post-list-item"><a class="post-list-link" href="/blog/2020/01/06/Why-Google-Analytics-pageviews-different-from-filter-by-day-and-by-month/">Why Google Analytics pageviews different from filter by day and by month</a></li><li class="post-list-item"><a class="post-list-link" href="/blog/2019/12/18/Find-out-app-API-endpoint/">Find out app API endpoint</a></li><li class="post-list-item"><a class="post-list-link" href="/blog/2019/11/28/Becareful-of-JavaScript-blocking-the-main-thread/">Becareful of JavaScript blocking the main thread</a></li><li class="post-list-item"><a class="post-list-link" href="/blog/2019/08/22/How-to-prevent-duplicated-join-of-table-in-Laravel-Query-Builder/">How to prevent duplicated join of table in Laravel Query Builder</a></li><li class="post-list-item"><a class="post-list-link" href="/blog/2019/08/08/The-efficient-way-to-debug-JS-CSS-in-production-site/">The efficient way to debug JS/CSS in production site</a></li><li class="post-list-item"><a class="post-list-link" href="/blog/2019/07/11/docker-compose-for-Elasticsearch-Kibana/">docker-compose for Elasticsearch & Kibana</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-comment-o"> Recent Comments</i></div><script type="text/javascript" src="//jslim89.disqus.com/recent_comments_widget.js?num_items=5&amp;hide_avatars=1&amp;avatar_size=32&amp;excerpt_length=20&amp;hide_mods=1"></script></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> Links</i></div><ul></ul><a href="http://blog.jsl.im" title="Js' Journey" target="_blank">Js' Journey</a></div><div class="affiliates"><div><a href="https://luminati.io/?affiliate=ref_5d2fff2b8fcb5320de59b227&amp;cam=L_yairi" title="The largest proxy network" target="_blank"><img src="/images/ads/lum_ad_250x250.png"/></a></div><div><a href="https://m.do.co/c/abb622813f68" title="Deploy your next app in seconds. Get $50 in cloud credits from @DigitalOcean" target="_blank"><img src="/images/ads/DigitalOcean_300x250.gif" style="width:250px;height:auto;"/></a></div></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright © 2020 <a href="/." rel="nofollow">Js' Technical Blog.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a class="show" id="rocket" href="#top"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="/js/copycode.js" successtext="Copy Successed!"></script><link rel="stylesheet" type="text/css" href="/css/copycode.css"><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>